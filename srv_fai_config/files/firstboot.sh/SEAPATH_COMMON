#!/bin/bash
# Load all container images from /opt/*.tgz files
# This is simpler and more robust - no need for a config file
for tgz_file in /opt/*.tgz; do
    # Check if file exists (in case /opt is empty)
    [ -f "$tgz_file" ] || continue
    
    # Try to load the image
    if podman load -i "$tgz_file" >/dev/null 2>&1; then
        echo "Loaded container image from $tgz_file"
        rm -f "$tgz_file"
    else
        echo "Warning: Failed to load container image from $tgz_file (may not be a valid image file)" >&2
        # Optionally remove invalid files or keep them for debugging
        # rm -f "$tgz_file"
    fi
done
systemctl disable firstboot.service
rm -f /etc/systemd/system/firstboot.service
rm -f /firstboot.sh
